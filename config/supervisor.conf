[supervisord]
logfile=%(here)s/../logs/supervisor.log
logfile_maxbytes=10MB
logfile_backups=3
loglevel=info
pidfile=%(here)s/../logs/supervisord.pid
nodaemon=false
directory=%(here)s/..

[unix_http_server]
file=%(here)s/../logs/supervisor.sock

[supervisorctl]
serverurl=unix://%(here)s/../logs/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:trading_bot]
command=python3 -u src/main.py
directory=%(here)s/..
autostart=true
autorestart=true
startretries=10
startsecs=5
stopwaitsecs=10
stdout_logfile=%(here)s/../logs/trading_bot.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_redirect=true
environment=PYTHONUNBUFFERED="1"

[program:dashboard]
command=python3 -u src/dashboard.py
directory=%(here)s/..
autostart=true
autorestart=true
startretries=5
startsecs=3
stopwaitsecs=5
stdout_logfile=%(here)s/../logs/dashboard.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
stderr_redirect=true
environment=PYTHONUNBUFFERED="1"

[group:cryptobot]
programs=trading_bot,dashboard
priority=999
